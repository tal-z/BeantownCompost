{% extends 'base.html'%}
{% load crispy_forms_tags %}

{% block title %}
My Sites
{% endblock title %}

{% block header %}
Hello, {{ user.username|default:'Guest' }}!
{% endblock header %}

{% block content %}

    <div class="map-container">
        {{ map|safe }}
    </div>
    <table class="table table-striped table-dark table-bordered text-light table-hover table-sm">
        <thead>
            <tr><th>Click a Location to Manage Details</th></tr></thead>
            {% for dropoff in dropoffs %}
                <tr onclick="navigate_to('/update_location/?id={{ dropoff.id }}')"><td class="col-md-3">{{ dropoff }}</td></tr>
            {% endfor %}
    </table>
{% endblock content %}
{% block script %}
<script>
    let frame = document.getElementsByTagName('iframe')[0];
    var innerDoc = frame.contentDocument || frame.contentWindow.document;

    function navigate_to(url) {
        window.location = url;
    }
</script>
{% endblock script %}